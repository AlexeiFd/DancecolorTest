:root {
    --header-height: 7.5rem;
    --header-height-tablet: 4.25rem;
    --header-height-mobile: 3.5rem;
}

$header-height: var(--header-height);
$header-height-tablet: var(--header-height-tablet);
$header-height-mobile: var(--header-height-mobile);

$ease-default: .28s ease;
$ease-fast: .16s ease;
$bezier: .28s cubic-bezier(.2, .9, .3, 1);
$translate-small: -0.375rem;
$arrow-translateY: -50%;
$max-open-height: 50rem;
$white-06: rgba(255, 255, 255, 0.6);
$white-04: rgba(255, 255, 255, 0.4);

$bp-lg: 81.25rem;
$bp-md: 64rem;
$bp-sm: 53.7rem;
$bp-mobile: 48rem;
$bp-nested-hide: 48.0625rem;

@mixin trans($props...) {
    transition: $props;
}

@mixin trans-default {
    @include trans(transform $bezier, opacity $ease-default, max-height .32s ease);
}

@mixin translateY($y) {
    transform: translateY($y);
}

@mixin overflow-touch {
    -webkit-overflow-scrolling: touch;
}

.fullscreenMenu {
    position: fixed;
    left: 0;
    right: 0;
    top: $header-height;
    bottom: auto;
    height: 0;
    visibility: hidden;
    overflow: hidden;
    opacity: 0;
    @include translateY($translate-small);
    @include trans(opacity $ease-default, visibility $ease-default, transform $bezier, height $ease-default);
    z-index: 300;
    display: flex;
    flex-direction: column;
    pointer-events: none;
    background: #011126;

    &.open {
        bottom: 0;
        height: calc(100dvh - #{$header-height});
        visibility: visible;
        opacity: 1;
        @include translateY(0);
        @include trans(opacity $ease-default, visibility $ease-default, transform $bezier, height $ease-default);
        pointer-events: auto;

        .menuInner {
            max-height: calc(100dvh - #{$header-height});
            overflow-y: auto;
            @include overflow-touch;
        }
    }

    &,
    .menuInner {
        @include trans-default;
        will-change: transform, opacity;
        backface-visibility: hidden;
    }

    @include translateY($translate-small);

    &.open {
        @include translateY(0);
    }
}

.menuInner {
    flex: 1;
    display: flex;
    align-items: flex-start;
    color: #fff;
    position: relative;
    max-height: 100%;
    overflow: hidden;
    @include trans-default;
}

.fullscreenMenu.hideScrollbar .menuInner {
    scrollbar-width: none;
    -ms-overflow-style: none
}

.leftCol {
    padding: 5.0625rem 3.75rem 2.5rem 4rem;
    display: flex;
    align-items: flex-start;
    position: relative;
    z-index: 2;
}

.leftNav {
    display: flex;
    flex-direction: column;
    width: 32.0625rem;
    gap: 1.25rem;

    @media (max-width: $bp-lg) {
        width: 20rem;
    }

    @media (max-width: $bp-md) {
        width: 18rem;
    }

    @media (max-width: $bp-sm) {
        width: 17rem;
    }

    @media (max-width: $bp-mobile) {
        width: 100%;
    }
}

.leftServiceBlock {
    display: flex;
    flex-direction: column;
    width: 100%;
    letter-spacing: -0.1;
}

.leftItem {
    position: relative;
    display: flex;
    justify-content: space-between;
    padding: 0;
    width: 100%;
    background: transparent;
    border: 0;
    color: #fff;
    font-weight: 500;
    font-size: 3.6875rem;
    line-height: 1.011;
    text-align: left;
    cursor: pointer;
    box-sizing: border-box;

    >span {
        display: flex;
        white-space: nowrap;
    }

    &:hover {
        opacity: 0.95;
        @include trans(opacity $ease-fast);
    }

    @media (max-width: $bp-md) {
        font-size: 2.8rem;
    }

    @media (max-width: $bp-sm) {
        font-size: 2.4rem;
    }

    @media (max-width: $bp-mobile) {
        font-size: 1.875rem;
    }
}

.servicesArrow {
    position: absolute;
    right: 0;
    top: 50%;
    display: inline-block;
    transform-origin: center;
    transform: translateY($arrow-translateY) rotate(90deg);
    @include trans(transform $bezier);
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform-style: preserve-3d;
}

.rot {
    transform: translateY($arrow-translateY) rotate(0deg);
}

.nestedServices {
    list-style: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    @include translateY($translate-small);
    @include trans(max-height .32s ease, opacity $ease-default, transform $bezier);

    &.open {
        max-height: $max-open-height;
        margin-top: 1.25rem;
        opacity: 1;
        line-height: 1.3;
        @include translateY(0);

        .dividingLine {
            height: 0.0625rem;
            background: rgba(255, 255, 255, 04);
            opacity: 0.3;
        }
    }

    @media (min-width: $bp-nested-hide) {
        display: none !important;
    }
}


.nestedItem {
    margin-bottom: 1rem;

    &:last-of-type {
        margin-top: 0;
        margin-bottom: 2.5rem;
    }
}

.nestedBtn {
    background: transparent;
    border: 0;
    color: #ffffff;
    font-size: 1.125rem;
    font-weight: 500;
    cursor: pointer;
    text-align: left;
    padding: 0;
}

.splitter {
    min-width: 1px;
    height: 100%;
    background-color: $white-04;
    margin-right: 5.875rem;
    opacity: 0.6;

    @media (max-width: $bp-md) {
        margin-right: 3.8rem;
    }

    @media (max-width: $bp-mobile) {
        display: none;
    }
}

.rightCol {
    flex: 1;
    padding: 5.625rem 5rem 4rem 0;
    display: flex;
    align-items: flex-start;
    position: relative;
    z-index: 2;

    @media (max-width: $bp-md) {
        padding: 3.5rem 5rem 4rem 0;
    }

    @media (max-width: $bp-mobile) {
        display: none;
    }
}

.rightInner {
    max-width: 32.5rem;
    width: 100%;
}

.servicesList {
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: 1.125rem;
    opacity: 0;
    @include translateY($translate-small);
    @include trans(opacity $ease-default, transform $bezier, max-height .32s ease);
    max-height: 0;

    &.open {
        opacity: 1;
        @include translateY(0);
        max-height: $max-open-height;
    }

    @media (min-width: $bp-nested-hide) {
        display: block;
    }
}

.serviceItem {
    margin-bottom: 1.25rem;
}

.serviceBtn {
    padding: 0;
    background: transparent;
    border: 0;
    color: #fff;
    font-weight: 500;
    font-size: 1.5rem;
    text-align: left;
    cursor: pointer;

    @media (max-width: $bp-md) {
        font-size: 1.4rem;
    }

    @media (max-width: $bp-sm) {
        font-size: 1.1rem;
    }
}

.closeBtn {
    position: relative;
    right: 1.875rem;
    top: 2.125rem;
    background: transparent;
    border: 0;
    cursor: pointer;
    padding: 0.5rem;
    z-index: 2;

    @media (max-width: $bp-md) {
        display: none;
    }
}

.menuFooter {
    height: 8.4375rem;
    border-top: 1px solid $white-04;
    display: flex;
    padding-top: 2.5625rem;
    align-items: flex-start;
    color: #F5F5F5;
    opacity: 0.6;

    a {
        display: flex;
        align-items: center;
    }

    a,
    a:link,
    a:visited {
        color: #F5F5F5;
        text-decoration: none;
    }

    a:hover {
        text-decoration: none;
    }

    @media (max-width: $bp-mobile) {
        height: 9.6875rem;
        padding-top: 1.875rem;
    }
}

.footerInner {
    max-width: 75rem;
    width: 100%;
    margin-left: 4rem;
    font-size: 1.25rem;
    font-weight: 500;
    display: flex;
    gap: 4.25rem;
    align-items: center;

    @media (max-width: $bp-md) {
        font-size: 1rem;
        gap: 3rem;
    }

    @media (max-width: $bp-mobile) {
        margin-left: 1.25rem;
        font-size: 0.875rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0;

        > :nth-child(1) {
            margin-bottom: 1.875rem;
        }

        > :nth-child(2) {
            margin-bottom: 0.8rem;
        }

        > :last-child {
            font-size: 1rem;
        }

        a {
            display: inline-flex;
            align-items: center;
            gap: 0.875rem;
            text-decoration: none;
            color: inherit;
            line-height: 1;
        }
    }
}

.emailIcon,
.phoneIcon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.25rem;
    height: 1.25rem;
    padding: 0;
    margin-right: 0.625rem;
    position: static;
    top: auto;

    @media (max-width: $bp-mobile) {
        margin: 0;
    }
}

.emailIcon img,
.phoneIcon img {
    display: block;
    object-fit: contain;
}

@media (max-width: $bp-md) {
    :root {
        --header-height: #{$header-height-tablet};
    }

    .leftCol {
        padding: 3.1rem 2.75rem 2.5rem 2.5rem;
    }
}

@media (max-width: $bp-sm) {
    .leftNav {
        width: 17rem;
    }
}

@media (max-width: $bp-mobile) {
    :root {
        --header-height: #{$header-height-mobile};
    }

    .menuInner {
        flex-direction: column;
        padding-top: 0;
    }

    .leftCol {
        width: 100%;
        padding: 1.25rem;
        order: 1;
    }

    .leftNav {
        width: 100%;
    }

    .rightCol {
        display: none;
    }

    .splitter {
        display: none;
    }

    .leftItem {
        font-size: 1.875rem;
    }

    .menuFooter {
        height: 9.6875rem;
        padding-top: 1.875rem;
    }
}

.backgroundBlur {
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    pointer-events: none;
    overflow: visible;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.backgroundBlur img {
    position: relative;
    max-width: 135vh;
    right: 4vh;
    height: auto;
    display: block;
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
    will-change: transform, opacity;
    opacity: 1;
    filter: none;

    @media (max-width: $bp-mobile) {
        max-width: 170vh;
    }
}

.menuInner,
.menuFooter,
.leftCol,
.closeBtn,
.rightCol {
    position: relative;
    z-index: 2;
}

.servicesArrow {
    transform-origin: center;
    @include trans(transform $bezier);
    will-change: transform;
    transform: translateY($arrow-translateY) rotate(90deg);
}

.menuInner.hideScrollbar {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.menuInner.hideScrollbar::-webkit-scrollbar {
    display: none;
}

.warmUp {
    will-change: transform, opacity;
    transform: translateZ(0);
}

@media (min-width: $bp-nested-hide) {
    .servicesArrow {
        transform: translateY($arrow-translateY) rotate(90deg);
    }

    .menuInner:has(.servicesList.open) .servicesArrow,
    .menuInner.services-open .servicesArrow {
        transform: translateY($arrow-translateY) rotate(0deg);
    }
}

@media (max-width: $bp-mobile) {
    .servicesArrow {
        transform: translateY($arrow-translateY) rotate(0deg);
    }

    .menuInner:has(.nestedServices.open) .servicesArrow,
    .menuInner.services-open .servicesArrow {
        transform: translateY($arrow-translateY) rotate(90deg);
    }
}

@media (prefers-reduced-motion: reduce) {

    .fullscreenMenu,
    .menuInner,
    .nestedServices,
    .servicesList {
        transition: none !important;
        transform: none !important;
    }
}